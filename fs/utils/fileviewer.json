{
  "blocks": [
    {
      "type": "load-component",
      "id": "0otrjh",
      "start": 0,
      "path": "",
      "output": "",
      "active": false,
      "focus": false,
      "drag_x": 1289.0682106508261,
      "drag_y": 1667.7271284340552,
      "drag_w": 600,
      "drag_h": 10
    },
    {
      "type": "save-component",
      "id": "d2db1m",
      "start": 0,
      "path": "test/fileviewer.json",
      "output": "",
      "active": false,
      "focus": false,
      "drag_x": 652.867674233665,
      "drag_y": 1663.8403610106884,
      "drag_w": 600,
      "drag_h": 10,
      "autosave": false
    },
    {
      "type": "editor_sizer",
      "id": "q05bgb",
      "start": 0,
      "drag_x": 8.185538762772254,
      "drag_y": 1657.9808778476524,
      "size": "100",
      "output": "",
      "active": false,
      "drag_w": 600,
      "drag_h": 80
    },
    {
      "type": "code",
      "id": "1xu0na",
      "start": 0,
      "drag_x": 937.7964651626878,
      "drag_y": 547.4847555857533,
      "drag_w": 600,
      "drag_h": 80,
      "focused": false,
      "output": "\n\n\n\n\n\n",
      "cursor": 0,
      "active": false
    },
    {
      "type": "code",
      "id": "etck6",
      "start": 6,
      "drag_x": 730.9795361239924,
      "drag_y": 395.4303232400781,
      "drag_w": 600,
      "drag_h": 80,
      "focused": false,
      "output": "\n\n\n\n\n\n\n",
      "cursor": 0,
      "active": false
    },
    {
      "type": "code",
      "id": "ab6ag7",
      "active": false,
      "start": 13,
      "drag_x": 558.5862470237192,
      "drag_y": 260.4608120685707,
      "drag_w": 600,
      "drag_h": 80,
      "focused": false,
      "output": "\n\n\n",
      "cursor": 0
    },
    {
      "type": "code",
      "id": "l5qljd",
      "start": 16,
      "drag_x": 357.2980669929282,
      "drag_y": 154.5050814714155,
      "drag_w": 600,
      "drag_h": 80,
      "focused": false,
      "output": "\n\n\n\n\n",
      "cursor": 0,
      "active": false
    },
    {
      "type": "md",
      "id": "nqch8",
      "start": 21,
      "drag_x": 2011.3909094611358,
      "drag_y": 676.8276063825214,
      "drag_w": 600,
      "drag_h": 60,
      "md": "/editor/canvas-editor.json -- (opens) ->",
      "output": "",
      "active": true,
      "focus": false
    },
    {
      "type": "md",
      "id": "0ys6ec"
    },
    {
      "type": "code",
      "id": "tma0w",
      "start": 21,
      "focused": false,
      "output": "import {mut, h} from \"/lib/solid/monke.js\"\n\nconst defer = (fn, t = 400) => setTimeout(fn, t)\nconst M = mut({})\ndocument.M = M\n\ndefer(function() { save_path(\"utils/fileviewer.json\") }, 2500)\n\nfunction load_path(path){\n  if (M) { if (M.EDITOR) M.EDITOR.state.load(path) }\n}\n\nfunction save_path(path){\n  if (M) { if (M.EDITOR) M.EDITOR.state.save(path) }\n}\n\n\n\nfunction show_dir(path, dir){\n  let path_split = path.split(\"/\")\n  let path_slice = path_split.slice(0, path_split.length - 2)\n  let back_path = path_slice.join(\"/\")\n  let title = path == \"\" ? \"\" : \"../\" + back_path\n  let back = p(title, () => check_dir(back_path))\n  \n  let files = dir.files.map((f) => p(f, () => check_dir(path+\"/\"+f)))\n  let dirs = dir.dirs.map((f) => dir_elem(f, () => check_dir(path+\"/\"+f)))\n  \n  document.body.innerHTML = \"\"\n  document.body.appendChild(back)\n  dirs.forEach((f) => document.body.appendChild(f))\n  files.forEach((f) => document.body.appendChild(f))\n}\n\nfunction show_file(src) {\n  if (src.split(\".\").pop() == \"jpg\"){\n    document.body.innerHTML = `<img src=\"${src}\"></img>`\n  }\n  console.log(\"src\", src)\n}\n\nfunction dir_elem(text, onclick){\n  let style = {\n    \"font-family\": \"monospace\",\n    border: `1px solid white`,\n    color: \"white\",\n    padding: `10px`,\n    width: 'min-content',\n    \"min-width\": '300px',\n    cursor: \"pointer\"\n  }\n\n  return  h(\"p\", {style, onclick}, text )()\n}\n\n\n\n\n\n",
      "cursor": 0,
      "active": false,
      "focus": false,
      "drag_x": 2530.184154275901,
      "drag_y": 130.30696241003372,
      "drag_w": 600,
      "drag_h": 120
    },
    {
      "type": "code",
      "id": "qzadb",
      "start": 1406,
      "drag_x": 3182.9613263722613,
      "drag_y": 115.04089735703546,
      "focused": false,
      "output": "function p(text, onclick){\n  \n  let style = {\n    \"font-family\": \"monospace\",\n    color: \"green\",\n    width: 'min-content',\n    \"min-width\": '300px',\n    cursor: \"pointer\"\n  }\n\n  \n  return h(\"p\", {style, onclick}, text)()\n}\n\nfunction check_dir(path = \"\", root = \"/fs/\"){\n  fetch(root+path)\n    .then((res) => {\n      console.log(\"got res\")\n      try{ let r = res.json(); if(r) return r; else return null }\n      catch { return null }\n      return null\n    })\n    .then((res) => {\n      console.log(res)\n      if (!res) console.log(\"failed\")\n      if (res.type == \"dir\") show_dir(path, res) \n      else show_file(root+path)\n    })\n}\n\ncheck_dir(\"\")\n\n\n\n\n\n",
      "cursor": 0,
      "active": false,
      "focus": false,
      "drag_w": 800,
      "drag_h": 160
    },
    {
      "type": "load-component",
      "id": "6nfuj",
      "start": 2058,
      "drag_x": 65.32826980296615,
      "drag_y": 23.42805601006979,
      "drag_w": 600,
      "drag_h": 10,
      "path": "",
      "output": "",
      "active": false
    }
  ],
  "output": ""
}